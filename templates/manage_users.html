<!doctype html>

{% extends "layout.html" %}

{% block content %}

<h2>Hallinnoi käyttäjätilejä</h2>

<form action="/manage_users">
    <input class="input text" type="text" id="username" name="username" maxlength="50" value="{{ user_input }}">
    <input class="input" type="submit" value="Hae">
    <br>
    <br>
</form>

{% if no_hits %}
    <div class="content flash">
        Ei osumia
    </div>
{% endif %}

{% if session.admin %}
    {% for user in users %}
        <div class="content user">
            <div class="flex-fill text">
                {{ user.name }}
            </div>

            {% if user.id != session.user_id %}
                <div class="flex-fill">
                    {% if user.disabled_at %}
                        <div style="font-size: small; margin-left: 20px; margin-right: 10px;">
                            Poistettu käytöstä {{ user.disabled_at.strftime("%d.%m.%Y %H:%M:%S") }}
                        </div>
                    {% endif %}

                    <form
                        class="inlined" method="post"
                        action="/{{ 'enable' if user.disabled_at else 'disable'}}_user/{{ user.id }}">
                        <input
                            class="input" type="submit"
                            value="{{ 'Ota käyttöön' if user.disabled_at else 'Poista käytöstä' }}"
                        >
                        <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
                    </form>
                </div>
            {% endif %}
        </div>
    {% endfor %}
{% endif %}

{% endblock %}
